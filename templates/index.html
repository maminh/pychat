{% extends 'base.html' %}
{% block content %}
    <h1>Flask-SSE Quickstart</h1>

    {% if contacts %}
        <p>Contacts list</p>
        <ul>
            {% for contact in contacts %}
                <li>
                    <div>
                        <p>{{ contact.to_person.username }}</p>
                        <button>make call</button>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% endif %}

{% endblock %}


{#  <script>#}
{#    var source = new EventSource("{{ url_for('sse.stream') }}");#}
{#    source.addEventListener('greeting', function(event) {#}
{#        var data = JSON.parse(event.data);#}
{#        alert("The server says " + data.message);#}
{#    }, false);#}
{#    source.addEventListener('error', function(event) {#}
{#        alert("Failed to connect to event stream. Is Redis running?");#}
{#    }, false);#}
{#  </script>#}
